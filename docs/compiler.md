# Compiler

Compile an Element or an AST into CSS.

## Usage

Pretty print css

```php
use \TBela\CSS\Compiler;

$compiler = new Compiler();
$compiler->setContent('body {
    border: 0px;
    color: rgba(100, 100, 100, .8);
    }');

echo $compiler->compile();
```

Result

```css
body {
  border: 0;
  color: rgba(100, 100, 100, 0.8);
}
```

Produce minified output

```php
$compiler->setOptions(['compress' => true, 'convert_color' => 'hex']);

echo $compiler->compile();
```

Result

```css
body {border: 0;color: #646464cc;}
```

Load AST from a json file

```php

// save AST
file_put_contents('ast.json', $compiler->getData());

// or if you use Parser
// file_put_contents('ast.json', $parser->parse());

// ...
$ast = json_decode(file_get_contents('ast.json'));

$compiler->setOptions(['compress' => true, 'convert_color' => 'hex']);
$compiler->setData($ast);

echo $compiler->compile();
```

Load a css string

```php

$ast = json_decode(file_get_contents('style.json'));

$compiler->setOptions(['compress' => true, 'convert_color' => 'hex']);
$compiler->setContent('body { border: 0px; }');

echo $compiler->compile();
```

## Compiler Options

### indent

_string_. The string used to indent lines. The default value is the space char ' '

### glue

_string_. The string used as line separator. The default value is "\n"

### separator

_string_. The character used to tokens. The default value is the space char ' '

### charset

_boolean_. If false then remove @charset declaration. The default value is _false_

### convert_color

_boolean | string_ Convert colors to a format between _hex_, _hsl_, _rgb_, _hwb_ and _device-cmyk_. if set to false then no conversion is performed. default to _hex_.
if you want to convert hsla and rgba like colors to hex, to must set css_level to 4 otherwise they will be converted to rgba

### compress

_boolean_. If true then compress the css. If false then pretty print the css. The default value is _false_

### css_level

_int_. Support features specific to the specified CSS level. Setting the value 3 will output colors using CSS3 format. The default value _4_ will use CSS4 color format

### remove_comments

_boolean_. If true then remove comments. When compress is set to true then comments are always removed. The default value is _false_

### remove_empty_nodes

_boolean_. If true then remove empty css rules and media queries. The default value is _true_

### allow_duplicate_declarations

_boolean_|_string_|_array_. If false then duplicated declarations are removed. if it is set to a string or and array, only the specified properties duplicates are allowed. The default value is _\['background-image'\]_

### compute_shorthand

_boolean_. compute shorthand properties. default true

## Compiler Methods

### Constructor

Constructor

#### Parameters

- \$options: _array_. see [compiler options](#compiler-options)

### Compile

Compile AST into css

#### Parameters

none

#### Return type

_string_.

### SetOptions

Configure the compiler options.

#### Parameters

- \$options: _array_. see [compiler options](#compiler-options)

#### Return type

\TBela\CSS\Compiler instance

### SetContent

#### Parameters

- \$css: _string_. css string
- \$options: _array_, optional parser options

#### Return type

\TBela\CSS\Compiler instance

### Load

#### Parameters

- \$file: _string_. css file path or url
- \$options: _array_, optional parser options
- \$media: _string_, optional the css media type

#### Return type

\TBela\CSS\Compiler instance

### SetData

#### Parameters

- \$ast: _\TBela\CSS\Element_|_object_. Assign an AST object to the compiler

#### Return type

\TBela\CSS\Compiler instance

### getData

#### Parameters

none

#### Return type

\TBela\CSS\Element instance

The compiler documentation automatically generated by phpdoc can be found [here](https://htmlpreview.github.io/?https://raw.githubusercontent.com/tbela99/css/master/docs/api/html/index.html)
